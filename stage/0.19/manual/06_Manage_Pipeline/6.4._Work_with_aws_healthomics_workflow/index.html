<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>6.4. Work with AWS HealthOmics Workflow - Cloud Pipeline</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../../../css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "6.4. Work with AWS HealthOmics Workflow";
        var mkdocs_page_input_path = "manual/06_Manage_Pipeline/6.4._Work_with_aws_healthomics_workflow.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> Cloud Pipeline
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Introduction</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Release notes</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../release_notes/v.0.13/v.0.13_-_Release_notes/">v.0.13</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../release_notes/v.0.14/v.0.14_-_Release_notes/">v.0.14</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../release_notes/v.0.15/v.0.15_-_Release_notes/">v.0.15</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../release_notes/v.0.16/v.0.16_-_Release_notes/">v.0.16</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../release_notes/v.0.17/v.0.17_-_Release_notes/">v.0.17</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">User guide</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../../Cloud_Pipeline_-_Manual/">Contents</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../01_Quick_start/1._Quick_start/">1. Quick start</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../02_Getting_started/2._Getting_started/">2. Getting started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../03_Overview/3._Overview/">3. Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">4. Manage Folder</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../04_Manage_Folder/4._Manage_Folder/">4.0. Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../04_Manage_Folder/4.1._Create_an_object_in_Folder/">4.1. Create an object in Folder</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../04_Manage_Folder/4.2._Rename_folder/">4.2. Rename Folder</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../04_Manage_Folder/4.3._Delete_Folder/">4.3. Delete Folder</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../04_Manage_Folder/4.4._Clone_a_folder/">4.4. Clone a Folder</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../04_Manage_Folder/4.5._Lock_a_folder/">4.5. Lock a Folder</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">5. Manage Metadata</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../05_Manage_Metadata/5._Manage_Metadata/">5.0. Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../05_Manage_Metadata/5.1._Add_Delete_metadata_items/">5.1. Add/delete Metadata items</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../05_Manage_Metadata/5.2._Upload_metadata/">5.2. Upload Metadata</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../05_Manage_Metadata/5.3._Customize_view_of_the_entity_instance_table/">5.3. Customize view of the entity instance table</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../05_Manage_Metadata/5.4._Launch_a_run_configuration_on_metadata/">5.4. Launch a Run configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../05_Manage_Metadata/5.5._Download_data_from_external_resources_to_the_cloud_data_storage/">5.5. Download data from external resources</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">6. Manage Pipeline</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../6._Manage_Pipeline/">6.0. Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../6.1._Create_and_configure_pipeline/">6.1. Create and configure Pipeline</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../6.1.1._Building_WDL_pipeline_with_graphical_PipelineBuilder/">6.1.1. Building WDL Pipeline with graphical PipelineBuilder</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../6.2._Launch_a_pipeline/">6.2. Launch a Pipeline</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../6.3._Delete_a_pipeline/">6.3. Delete and unregister Pipeline</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">6.4. Work with AWS HealthOmics Workflow</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#1-create-pipeline-from-aws-healthomics-pipeline-template">1. Create pipeline from AWS HealthOmics pipeline template</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#2-integrate-existing-workflow-with-aws-healthomics-on-cloud-pipeline">2. Integrate existing workflow with AWS HealthOmics on Cloud Pipeline</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#obtain-gitlab-token-for-the-authentication">Obtain gitlab token for the authentication</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#clone-gitlab-repository-locally">Clone gitlab repository locally</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#modify-git-repository-and-ingest-workflow-code-in-it">Modify git repository and ingest workflow code in it</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#provide-parameter-values-to-the-workflow-during-pipeline-execution">Provide parameter values to the workflow during pipeline execution</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#running-the-pipeline-with-a-workflow">Running the pipeline with a workflow</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">7. Manage Detached configuration</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../07_Manage_Detached_configuration/7._Manage_Detached_configuration/">7.0. Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../07_Manage_Detached_configuration/7.1._Create_and_customize_Detached_configuration/">7.1. Create and customize Detached configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../07_Manage_Detached_configuration/7.2._Launch_Detached_Configuration/">7.2. Launch Detached configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../07_Manage_Detached_configuration/7.3._Expansion_Expressions/">7.3. Expansion expressions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../07_Manage_Detached_configuration/7.4._Remove_Detached_configuration/">7.4. Remove Detached configuration</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">8. Manage Data Storage</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../08_Manage_Data_Storage/8._Manage_Data_Storage/">8.0. Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../08_Manage_Data_Storage/8.1._Create_and_edit_storage/">8.1. Create and edit Data Storage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../08_Manage_Data_Storage/8.2._Upload_Download_data/">8.2. Upload/Download data</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../08_Manage_Data_Storage/8.3._Create_and_Edit_text_files/">8.3. Create and edit text files</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../08_Manage_Data_Storage/8.4._Control_File_versions/">8.4. Control file versions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../08_Manage_Data_Storage/8.5._Delete_and_unregister_Data_Storage/">8.5. Delete and unregister Data Storage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../08_Manage_Data_Storage/8.6._Delete_Files_and_Folders_from_Storage/">8.6. Delete Files and Folders from Data Storage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../08_Manage_Data_Storage/8.7._Create_shared_file_system/">8.7. Create shared file system</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../08_Manage_Data_Storage/8.8._Data_sharing/">8.8. Data sharing</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../08_Manage_Data_Storage/8.9._Mapping_storages/">8.9. Mapping storages</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../08_Manage_Data_Storage/8.10._Storage_lifecycle/">8.10. Storage lifecycle</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../08_Manage_Data_Storage/8.11._Sensitive_storages/">8.11. Sensitive storages</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../08_Manage_Data_Storage/8.12._Cloud_Data_app/">8.12. Cloud Data application</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../08_Manage_Data_Storage/8.13._Versioned_storages/">8.13. Versioned storages</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../08_Manage_Data_Storage/8.14._Omics_storages/">8.14. Omics storages</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">9. Manage cluster nodes</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../09_Manage_Cluster_nodes/9._Manage_Cluster_nodes/">9.0. Cluster nodes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../09_Manage_Cluster_nodes/9.1._Hot_node_pools/">9.1. Hot node pools</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">10. Manage Tools</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../10_Manage_Tools/10._Manage_Tools/">10.0. Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../10_Manage_Tools/10.1._Add_Edit_a_Docker_registry/">10.1. Add and edit a Docker registry</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../10_Manage_Tools/10.2._Add_Edit_a_Tool_group/">10.2. Add/edit a Tool group</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../10_Manage_Tools/10.3._Add_a_Tool/">10.3. Add a Tool</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../10_Manage_Tools/10.4._Edit_a_Tool/">10.4. Edit a Tool</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../10_Manage_Tools/10.5._Launch_a_Tool/">10.5. Launch a Tool</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../10_Manage_Tools/10.6._Tool_security_check/">10.6. Tool security check</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../10_Manage_Tools/10.7._Tool_version_menu/">10.7. Tool version menu</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../10_Manage_Tools/10.8._Symlinks_between_tools/">10.8. "Symlinked" tools</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../10_Manage_Tools/10.9._Run_capabilities/">10.9. Run capabilities</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">11. Manage Runs</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../11_Manage_Runs/11._Manage_Runs/">11.0. Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../11_Manage_Runs/11.1._Manage_runs_lifecycles/">11.1. Manage runs lifecycles</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../11_Manage_Runs/11.2._Auto-commit_Docker_image/">11.2. Auto-commit Docker images</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../11_Manage_Runs/11.3._Sharing_with_other_users_or_groups_of_users/">11.3. Sharing with other users</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../11_Manage_Runs/11.4._Automatic_actions_after_notifications/">11.4. Automatic labels and actions for the runs</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">12. Manage settings</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../12_Manage_Settings/12._Manage_Settings/">12.0. Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../12_Manage_Settings/12.1._Add_a_new_system_event/">12.1. Add a new system event</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../12_Manage_Settings/12.2._Edit_a_system_event/">12.2. Edit a system event</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../12_Manage_Settings/12.3._Create_a_new_user/">12.3. Create a new user</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../12_Manage_Settings/12.4._Edit_delete_a_user/">12.4. Edit/delete a user</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../12_Manage_Settings/12.5._Create_a_group/">12.5. Create a group</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../12_Manage_Settings/12.6._Edit_a_group_role/">12.6. Edit a group/role</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../12_Manage_Settings/12.7._Delete_a_group/">12.7. Delete a group</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../12_Manage_Settings/12.8._Change_a_set_of_roles_groups_for_a_user/">12.8. Change a set of roles/groups for a user</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../12_Manage_Settings/12.9._Change_email_notification/">12.9. Email notifications</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../12_Manage_Settings/12.10._Manage_system-level_settings/">12.10. Manage system-level settings</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../12_Manage_Settings/12.11._Advanced_features/">12.11. Advanced features</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../12_Manage_Settings/12.12._System_logs/">12.12. System logs</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../12_Manage_Settings/12.13._System_dictionaries/">12.13. System dictionaries</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../12_Manage_Settings/12.14._NAT_gateway/">12.14. NAT gateway</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../12_Manage_Settings/12.15._System_jobs/">12.15. System jobs</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../13_Permissions/13._Permissions/">13. Permissions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">14. CLI interface</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../14_CLI/14._Command-line_interface/">14.0. Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../14_CLI/14.1._Install_and_setup_CLI/">14.1. Install and setup</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../14_CLI/14.2._View_and_manage_Attributes_via_CLI/">14.2. View and manage Attributes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../14_CLI/14.3._Manage_Storage_via_CLI/">14.3. Manage Data Storage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../14_CLI/14.4._View_pipeline_definitions_via_CLI/">14.4. View pipeline definitions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../14_CLI/14.5._Manage_pipeline_executions_via_CLI/">14.5. Manage pipeline executions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../14_CLI/14.6._View_cluster_nodes_via_CLI/">14.6. View cluster nodes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../14_CLI/14.7._View_and_manage_Permissions_via_CLI/">14.7. View and manage Permissions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../14_CLI/14.8._View_tools_definitions_via_CLI/">14.8. View tools definitions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../14_CLI/14.9._User_management_via_CLI/">14.9. User management</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../14_CLI/14.10._SSH_tunnel/">14.10. SSH tunnel</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">15. Interactive services</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../15_Interactive_services/15._Interactive_services/">15.0. Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../15_Interactive_services/15.1._Starting_an_Interactive_application/">15.1. Starting an interactive application</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../15_Interactive_services/15.2._Using_Terminal_access/">15.2. Using terminal access</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../15_Interactive_services/15.3._Expose_node_filesystem/">15.3. Expose node filesystem</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../15_Interactive_services/15.4._Interactive_service_examples/">15.4. Interactive service examples</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../16_Issues/16._Issues/">16. Issues</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">17. Tagging by attributes</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../17_Tagging_by_attributes/17._CP_objects_tagging_by_additional_attributes/">17.0. CP objects tagging by additional attributes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../17_Tagging_by_attributes/17.1._Faceted_filters_search_by_tags/">17.1. Faceted filters search using tags</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../18_Home_page/18._Home_page/">18. Home page</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../19_Search/19._Global_search/">19. Global search</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Appendix_A/Appendix_A._Instance_and_Docker_container_lifecycles/">Appendix A. Instance and Docker container lifecycles</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Appendix_B/Appendix_B._Working_with_a_Project/">Appendix B. Working with a Project</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Appendix_C/Appendix_C._Working_with_autoscaled_cluster_runs/">Appendix C. Working with autoscaled cluster runs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Appendix_D/Appendix_D._Costs_management/">Appendix D. Costs management</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Appendix_E/Appendix_E._Pipeline_objects_concept/">Appendix E. Pipeline objects concept</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Appendix_F/Appendix_F._%D0%A1omparison_of_using_different_FS_storages_%28FSx_for_Lustre_vs_EFS_in_AWS%29/">Appendix F. Ð¡omparison of using different FS storage types</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Cloud Pipeline API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../api/API_tutorials/API_tutorials/">API tutorials</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../api/API_tutorials/Automation_via_CLI/">Automation via CLI</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../api/API_tutorials/Direct_HTTP_API/">Direct HTTP API implementation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../api/API_tutorials/JavaScript_example/">JavaScript example</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Cloud Pipeline Installation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="#">Prerequisites</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../installation/prerequisites/common/">General requirements</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../installation/prerequisites/aws/">AWS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../installation/prerequisites/azure/">Azure</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../installation/prerequisites/gcp/">GCP</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Deployment</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="#">AWS</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../../installation/deployment/aws/terraform/">Terraform</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../installation/deployment/aws/cloud-formation/">AWS CloudFormation</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Management</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../installation/management/environments_sync/">Environments sync</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../installation/change_kube_certificates/">Change Kubernetes certificates</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../installation/support_windows_runs/">Support Windows runs</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">Cloud Pipeline</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>User guide &raquo;</li>
          <li>6. Manage Pipeline &raquo;</li>
      <li>6.4. Work with AWS HealthOmics Workflow</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="64-aws-healthomics-workflow">6.4. AWS HealthOmics Workflow</h1>
<p><strong>Cloud Pipeline</strong> has built-in pipeline template that can be used to run your Nextflow workflow with AWS HealthOmics Workflow <a href="https://docs.aws.amazon.com/omics/latest/dev/workflows.html">https://docs.aws.amazon.com/omics/latest/dev/workflows.html</a>.</p>
<blockquote>
<p><strong><em>Note</em></strong>:</p>
<ul>
<li>Works only for AWS based <strong>Cloud Pipeline</strong> deployment</li>
<li>Currently only Nextflow workflows are supported</li>
</ul>
</blockquote>
<p>This document provides you with necessary information on how to use existing workflows or write your own in <strong>Cloud Pipeline</strong>, to be able to utilize AWS HealthOmics Workflow.</p>
<h2 id="1-create-pipeline-from-aws-healthomics-pipeline-template">1. Create pipeline from AWS HealthOmics pipeline template</h2>
<p>To start developing and Nextflow workflow or reuse existing one, first of all you will need to create Pipeline inside <strong>Cloud Pipeline</strong> platform. For this reason:</p>
<ol>
<li>Navigate to the <strong>Cloud Pipeline</strong> UI:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/create_pipeline_1.png" /></li>
<li>In the catalog tree choose a location (folder) where you would like to create you pipeline:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/create_pipeline_2.png" /></li>
<li>Click <strong>+ Create</strong> button in the upper right corner and choose <strong>Pipeline</strong> -&gt; <strong>AWS-HEALTHOMICS-WORKFLOW</strong>:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/create_pipeline_3.png" /></li>
<li>Specify desired name and click CREATE:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/create_pipeline_4.png" /></li>
<li>Wait while pipeline being created and after that click on its name in the folder content listing:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/create_pipeline_5.png" /></li>
<li>Then click on the newly created revision of this pipeline and choose CODE tab at the top menu:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/create_pipeline_6.png" /><br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/create_pipeline_7.png" /></li>
<li>Now, lets take a look on the structure of it:  </li>
</ol>
<pre><code>- workflow/                  # Directory where all workflow related code should be placed
   - main.tf                 # Workflow file with dummy pipeline          
   - nextflow.config         # Worklow configuration file
- run-omics-workflow.sh      # Entry of the Cloud Pipeline pipeline, this script will be run on start up of the pipeline and will take care of creation and run of the AWS HealthOmics Workflow 
- config.json                # Standard Cloud Pipeline pipeline configuration file where all pipeline related settings are stored
</code></pre>
<p>Now you are ready to proceed develop your own / utilize existing workflow.</p>
<h2 id="2-integrate-existing-workflow-with-aws-healthomics-on-cloud-pipeline">2. Integrate existing workflow with AWS HealthOmics on Cloud Pipeline</h2>
<p>Process of developing your own workflow hasn't actual difference from using existing one, in terms of integration this workflow with AWS HealthOmics on <strong>Cloud Pipeline</strong>.<br />
Here we describe the process of how to reuse existing workflow with AWS HealthOmics on <strong>Cloud Pipeline</strong>, but you can also use this documentation wen developing it from scratch.</p>
<h3 id="obtain-gitlab-token-for-the-authentication">Obtain gitlab token for the authentication</h3>
<blockquote>
<p>Each pipeline object in <strong>Cloud Pipeline</strong> Platform is a git repository hosted on gitlab, so it is possible and essential to use it as a git repository.</p>
</blockquote>
<ol>
<li>In the pipeline view page click GITLAB REPOSITORY:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/obtain_gitlab_token_1.png" /></li>
<li>Copy the url and navigate to the URL, if it asks to do it, authenticate with you credentials in <strong>Cloud Pipeline</strong> platform:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/obtain_gitlab_token_2.png" /><br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/obtain_gitlab_token_3.png" /></li>
<li>Navigate to the Settings -&gt; Access Tokens and fill required fields as shown on the screenshot, adjust expiration date and click <strong>Create project access token</strong>:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/obtain_gitlab_token_4.png" /></li>
<li>Copy new token and save it somewhere safe, you will need it:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/obtain_gitlab_token_5.png" /></li>
</ol>
<h3 id="clone-gitlab-repository-locally">Clone gitlab repository locally</h3>
<p>Open terminal and perform the following command: <code>git clone &lt; repo-name &gt;.git</code></p>
<blockquote>
<p>When it asks for the credentials - specify you <strong>Cloud Pipeline</strong> username as a Username and for the password use newly generated access token from previous step.</p>
</blockquote>
<p><img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/clone_git_repo.png" /></p>
<h3 id="modify-git-repository-and-ingest-workflow-code-in-it">Modify git repository and ingest workflow code in it</h3>
<blockquote>
<p>Here we will use <a href="https://github.com/nf-core/rnaseq/tree/3.11.1">nf-core/rnaseq v3.11.1</a> </p>
</blockquote>
<ol>
<li>Navigate to the <code>src/workflow</code> directory of your pipeline repository:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/rnaseq_ingest_1.png" /></li>
<li>Remove dummy sample pipeline files: <code>rm -rf ./*</code><br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/rnaseq_ingest_2.png" /></li>
<li>Clone rnaseq pipeline to the directory: <code>git clone https://github.com/nf-core/rnaseq.git .</code><br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/rnaseq_ingest_3.png" /></li>
<li>
<p>Checkout to the needed version and clean up:<br />
<code>git checkout 3.11.1</code><br />
<code>rm -rf ./git*</code><br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/rnaseq_ingest_4.png" />  </p>
<blockquote>
<p>This workflow need one small improvements to be made to work correctly, otherwise it will fail during execution.<br />
Provide additional flag <code>-p</code> for the <code>mkdir</code> command to not fail if directory already exists:<br />
<code>sed -i 's|mkdir|mkdir -p|g' modules/nf-core/qualimap/rnaseq/main.nf</code><br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/rnaseq_ingest_5.png" /></p>
</blockquote>
</li>
<li>
<p>Commit changes:<br />
<code>git add .</code><br />
<code>git commit -m "nf-core/rnaseq workflow code added"</code><br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/rnaseq_ingest_6.png" /></p>
</li>
<li>Push changes to the remote repository:<br />
<code>git push origin master</code><br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/rnaseq_ingest_7.png" />  <blockquote>
<p>When it asks for the credentials - specify you <strong>Cloud Pipeline</strong> username as a Username and for the password use newly generated access token from previous step.</p>
</blockquote>
</li>
<li>Navigate to the <strong>Cloud Pipeline</strong> UI -&gt; Pipeline view and check that <code>nf-core/rnaseq</code> workflow is in the <code>workflow</code> directory:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/rnaseq_ingest_8.png" /></li>
</ol>
<blockquote>
<p>During each new run of the pipeline, <strong>Cloud Pipeline</strong> will check if there is an inclusion of <code>omics.conf</code> file in <code>nextflow.config</code> file, which means that this pipeline is preconfigured for omics workflow.</p>
<ul>
<li>If configuration is there, <strong>Cloud Pipeline</strong> will simply pack the code and register as AWS HealthOmics Workflow,</li>
<li>Otherwise, it will try to configure it by inspecting the code with help of <a href="https://raw.githubusercontent.com/aws-samples/amazon-omics-tutorials/main/utils/scripts/inspect_nf.py">inspect_nf.py</a> and prepare necessary configs files.</li>
</ul>
</blockquote>
<h3 id="provide-parameter-values-to-the-workflow-during-pipeline-execution">Provide parameter values to the workflow during pipeline execution</h3>
<blockquote>
<p>Most of the workflows will expect some input parameters to be provided on startup, so we need some mechanism to provide these parameters to the underlying workflow during <strong>Cloud Pipeline</strong> pipeline execution.</p>
<p>For <code>nf-code/rnaseq</code> there is a <a href="https://nf-co.re/rnaseq/3.11.1/parameters">page</a> where you can inspect all available values that can be provided.</p>
<p>For this <code>nf-core/rnaseq</code> pipeline we specify the next parameters:</p>
<ul>
<li>input</li>
<li>fasta</li>
<li>gtf</li>
</ul>
</blockquote>
<ol>
<li>Go to <strong>CONFIGURATION</strong> tab of the pipeline:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/provide_params_1.png" /></li>
<li>There is <code>OUTPUT_DIR</code> parameter that should be filled in. S3 bucket prefix is expected here. This is parameter with <code>path</code> type, so you are able to navigate through <strong>Cloud Pipeline</strong> storages, to specify the value:<ul>
<li>Click on folder icon <img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/provide_params_2.png" /> near the parameter name.</li>
<li>Choose the bucket prefix and click OK:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/provide_params_3.png" /></li>
<li>You can also add some additional postfix for the selected path (for example if you would like to this postfix to be created during pipeline execution), and you also are able to use special keywords such as <code>${RUN_ID}</code>, this one will be resolved during pipeline execution to the read run id value, so it will guarantee unique output prefix for each run.<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/provide_params_4.png" /></li>
</ul>
</li>
<li>Click <img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/provide_params_5.png" /> near to <strong>Add parameter</strong> button and choose <code>Path parameter</code>. New placeholder will appear:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/provide_params_6.png" /></li>
<li>Specify name as <code>fasta</code>.</li>
<li>Create another two parameters <code>gtf</code> and <code>input</code> with the same <code>path</code> type as follows and click <strong>Save</strong> button at the right corner of this view:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/provide_params_7.png" /></li>
</ol>
<h3 id="running-the-pipeline-with-a-workflow">Running the pipeline with a workflow</h3>
<blockquote>
<p>Test data location: <a href="https://github.com/nf-core/test-datasets">https://github.com/nf-core/test-datasets</a> branch <code>rnaseq</code></p>
<ul>
<li>fasta: <a href="https://raw.githubusercontent.com/nf-core/test-datasets/rnaseq/reference/genome.fasta">https://raw.githubusercontent.com/nf-core/test-datasets/rnaseq/reference/genome.fasta</a></li>
<li>samplesheet: <a href="https://raw.githubusercontent.com/nf-core/test-datasets/rnaseq/samplesheet/samplesheet.csv">https://raw.githubusercontent.com/nf-core/test-datasets/rnaseq/samplesheet/samplesheet.csv</a></li>
<li>fastqs: <a href="https://github.com/nf-core/test-datasets/tree/rnaseq/testdata/GSE110004">https://github.com/nf-core/test-datasets/tree/rnaseq/testdata/GSE110004</a></li>
</ul>
</blockquote>
<ol>
<li>From the pipeline view click <strong>RUN</strong> button:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/run_pipeline_1.png" /><br />
   You will see the next view:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/run_pipeline_2.png" /></li>
<li>Choose desire path to the fasta file (it could be s3 or AWS HealthOmics store path).  <ul>
<li>Click on folder icon <img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/provide_params_2.png" /> near the parameter name.</li>
<li>Here we choose path from AWS HealthOmics Reference Store:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/run_pipeline_3.png" /></li>
<li>Final value would be:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/run_pipeline_4.png" /></li>
</ul>
</li>
<li>For <code>gtf</code> parameter specify path to the desire gtf file on s3:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/run_pipeline_5.png" /></li>
<li>The last parameter would be a <code>input</code> with a path to the samplesheet on s3 bucket:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/run_pipeline_6.png" /><br />
   Samplesheet can refer files from the s3 or AWS HealthOmics Sequence Store. In our case it is an AWS HealthOmics Sequence Store.  <blockquote>
<p>Format of the file as follows:<br />
<code>sample,fastq_1,fastq_2,strandedness</code><br />
<code>SRR6357070_2,omics://332551323846.storage.eu-west-1.amazonaws.com/7077728170/readSet/9082704952/source1.fastq.gz,omics://332551323846.storage.eu-west-1.amazonaws.com/7077728170/readSet/9082704952/source2.fastq.gz,reverse</code><br />
<code>SRR6357071_2,omics://332551323846.storage.eu-west-1.amazonaws.com/7077728170/readSet/2230602162/source1.fastq.gz,omics://332551323846.storage.eu-west-1.amazonaws.com/7077728170/readSet/2230602162/source2.fastq.gz,reverse</code><br />
<code>SRR6357072_2,omics://332551323846.storage.eu-west-1.amazonaws.com/7077728170/readSet/4337925538/source1.fastq.gz,omics://332551323846.storage.eu-west-1.amazonaws.com/7077728170/readSet/4337925538/source2.fastq.gz,reverse</code><br />
<code>SRR6357073_1,omics://332551323846.storage.eu-west-1.amazonaws.com/7077728170/readSet/7316328213/source1.fastq.gz,,reverse</code><br />
<code>SRR6357074_1,omics://332551323846.storage.eu-west-1.amazonaws.com/7077728170/readSet/9152942427/source1.fastq.gz,,reverse</code><br />
<code>SRR6357075_1,omics://332551323846.storage.eu-west-1.amazonaws.com/7077728170/readSet/1700045600/source1.fastq.gz,,reverse</code><br />
<code>SRR6357076_1,omics://332551323846.storage.eu-west-1.amazonaws.com/7077728170/readSet/2959595296/source1.fastq.gz,omics://332551323846.storage.eu-west-1.amazonaws.com/7077728170/readSet/2959595296/source2.fastq.gz,reverse</code></p>
<p>All these files were preregistered in AWS HealthOmics Sequence Store.<br />
You can find our the path to the specific file by navigating to the ReadSet file in your AWS HealthOmics Sequence Store in <strong>Cloud Pipeline</strong> UI and copy the path:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/run_pipeline_7.png" /></p>
<p>Also Note that for each file there should be a <code>.fastq.gz</code> extension specified at the end of the path.</p>
</blockquote>
</li>
<li>Click the <strong>LAUNCH</strong> button at the right upper corner:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/run_pipeline_8.png" /></li>
<li>Approve launch:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/run_pipeline_9.png" /></li>
<li>As result, you will see the next view:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/run_pipeline_10.png" /></li>
<li>Click on the newly created run to see its logs:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/run_pipeline_11.png" /></li>
<li>When pipeline will finish you will find its output under the path from <code>OUTPUT_DIR</code> parameter value:<br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/run_pipeline_12.png" /><br />
<img alt="CP_AWS_HealthOmicsWorkflow" src="../attachments/omics/run_pipeline_13.png" /></li>
</ol>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../6.3._Delete_a_pipeline/" class="btn btn-neutral float-left" title="6.3. Delete and unregister Pipeline"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../../07_Manage_Detached_configuration/7._Manage_Detached_configuration/" class="btn btn-neutral float-right" title="7.0. Overview">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../6.3._Delete_a_pipeline/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../07_Manage_Detached_configuration/7._Manage_Detached_configuration/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme_extra.js" defer></script>
    <script src="../../../js/theme.js" defer></script>
      <script src="../../../css/extra.js" defer></script>
      <script src="../../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
