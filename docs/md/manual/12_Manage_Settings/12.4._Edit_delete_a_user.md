# 12.4. Edit/delete a user

- [Edit a user](#edit-a-user)
    - [Default data storage](#default-data-storage)
    - [Groups (roles) management](#groups-roles-management)
    - [Attributes](#attributes)
    - [Launch options](#launch-options)
    - [Possibility to revert changes](#possibility-to-revert-changes)
- [Block/unblock a user](#blockunblock-a-user)
- [GUI impersonation](#gui-impersonation)
- [Delete a user](#delete-a-user)

> User shall have **ROLE\_ADMIN** to edit/delete users.

## Edit a user

For edit a user:

1. Open the **Users** subtab in the **User management** section of the system-level settings.
2. Find a user.
3. Click the **Edit** button in the row opposite the user name:  
    ![CP_EditDeleteUsers](attachments/EditDeleteUsers_01.png)
4. Pop-up window will appear:  
    ![CP_EditDeleteUsers](attachments/EditDeleteUsers_02.png)

At this form, there are several blocks of details/settings for a user.

### User info

Main details' section about the user, that contain general info fields like user name, date of the user registration in the Platform, user email address, first and last names, e.g.:  
    ![CP_EditDeleteUsers](attachments/EditDeleteUsers_24.png)

### Default data storage

Here you can select default data storage for a user:  
![CP_EditDeleteUsers](attachments/EditDeleteUsers_03.png)

### Groups (roles) management

In this block you can set groups and roles for the selected user:  
![CP_EditDeleteUsers](attachments/EditDeleteUsers_04.png)

For more information about changing a set of the roles/groups for the specific user see [12.8. Change a set of roles/groups for a user](12.8._Change_a_set_of_roles_groups_for_a_user.md#change-a-set-of-roles-and-groups-to-a-selected-user).

### Attributes

![CP_EditDeleteUsers](attachments/EditDeleteUsers_05.png)

In this block you can set metadata tags (attributes) for a user. These tags represent key/value pairs, same as pipeline/folder tags. For more information see [17. CP objects tagging by additional attributes](../17_Tagging_by_attributes/17._CP_objects_tagging_by_additional_attributes.md).

#### "Blocking" notifications track

One of the special attribute that is set automatically - information about the notifications confirmation:  
    ![CP_EditDeleteUsers](attachments/EditDeleteUsers_15.png)  
Via that attribute you can view, which "blocking" notifications were confirmed by the user (about system notifications see [here](12._Manage_Settings.md#system-events)).  
This attribute is shown only for users that confirmed at least one "blocking" notification.  
By default, this attribute has the following pair:

- _KEY_ - `confirmed_notifications` (that name could be changed via the system-level preference **`system.events.confirmation.metadata.key`**)
- _VALUE_ - link that shows summary count of confirmed notifications for the user

To open the detailed table with confirmed notifications for the user:

1. Click the _VALUE_ link:  
    ![CP_EditDeleteUsers](attachments/EditDeleteUsers_16.png)  
2. Here you can view detailed information about confirmed notifications - their titles, messages and datetime of the confirmation:  
    ![CP_EditDeleteUsers](attachments/EditDeleteUsers_17.png)  
3. Also you can open "raw" `JSON` view of the detailed table, if necessary. For that, click the **EDIT** button under the detailed table:  
    ![CP_EditDeleteUsers](attachments/EditDeleteUsers_18.png)  
4. Here you can edit the contents. Click the **SAVE** button to save changes:  
    ![CP_EditDeleteUsers](attachments/EditDeleteUsers_19.png)  

### Launch options

![CP_EditDeleteUsers](attachments/EditDeleteUsers_06.png)

In this block you can specify some restrictions for a specific user on allowed instance types, price types, jobs visibility, etc.
Here you can specify:

| Field and description | Example |
|---|---|
| **Allowed instance types mask**<br /><br />This mask restricts allowed instance types for launching tools, pipelines and configurations | If you want the user to be able to launch runs with only "m5..." instances types, mask would be **`m5*`**:<br />![CP_EditDeleteUsers](attachments/EditDeleteUsers_07.png)<br />In that case, before launching tool/pipeline/configuration, dropdown list of available node types will be like this:<br />![CP_EditDeleteUsers](attachments/EditDeleteUsers_08.png) |
| **Allowed tool instance types mask**<br /><br />This mask restricts allowed instance types only for tools.<br />This mask has higher priority for launching tool than **Allowed instance types mask**.<br />I.e. when both masks are set - for the launching tool, **Allowed tool instance types mask** will be applied. | If you want the user to be able to launch tools with only "large m5..." instances types, mask would be **`m5*.large*`**:<br />![CP_EditDeleteUsers](attachments/EditDeleteUsers_09.png)<br />In that case, before launching tool, dropdown list of available node types will be like this:<br />![CP_EditDeleteUsers](attachments/EditDeleteUsers_10.png) |
| **Allowed price types**<br /><br />This field may restrict, what price types are allowed for a user. | If you want the user to be able to launch only "On-demand" runs, select it:<br />![CP_EditDeleteUsers](attachments/EditDeleteUsers_11.png)<br />In that case, before launching tool, dropdown list of price types will be like this:<br />![CP_EditDeleteUsers](attachments/EditDeleteUsers_12.png) |
| **Jobs visibility**<br /><br />This field may restrict the visibility of runs at the **Active Runs** page for non-owner users. | If you want the user to be able to view all pipeline runs (for that pipelines on which user has corresponding permissions),<br />select "_Inherit_":<br />![CP_EditDeleteUsers](attachments/EditDeleteUsers_21.png)<br />If you want the user to be able to view only own runs launched, select "_Only owner_":<br />![CP_EditDeleteUsers](attachments/EditDeleteUsers_20.png) |
| **Cloud Credentials Profiles**<br /><br />Here, specific interfaces can be assigned for a user.<br />Such interfaces allow to use seamless authentication in _Cloud Provider_ services. | For details and examples see [here](12.11._Advanced_features.md#seamless-authentication-in-cloud-provider). |
| **Default Credentials Profile**<br /><br />Allows to select one of **Cloud Credentials Profiles** assigned to the user as the default profile. | For details and examples see [here](12.11._Advanced_features.md#seamless-authentication-in-cloud-provider). |

To apply configured launch options for a user, click ![CP_EditDeleteUsers](attachments/EditDeleteUsers_13.png) button in the right bottom corner of the pop-up. This action will save all made changes in the user settings (not only launch options) and close the pop-up.

Setting restrictions on allowed instance types/price types is a convenient way to minimize a number of invalid configurations runs.  
Such restrictions could be set not only for a user, but on another levels too.  
In **Cloud Pipeline** platform next hierarchy is set for applying of inputted allowed instance types (sorted by priority):

- **User level** (specified for a user) - see [12.4. Edit/delete a user](12.4._Edit_delete_a_user.md#launch-options) for details
- **User group level** (specified for a group/role). If a user is a member of several groups - list of allowed instances will be summarized across all the groups. See [above](#launch-options) for details
- **Tool level** (specified for a tool) - see [10.5. Launch a Tool](../10_Manage_Tools/10.5._Launch_a_Tool.md#instance-management) for details
- _(global)_ **`cluster.allowed.instance.types.docker`** (specified on "Cluster" subtab in "Preferences" section of system-level settings) - see [12.10. Manage system-level settings](12.10._Manage_system-level_settings.md#cluster) for details
- _(global)_ **`cluster.allowed.instance.types`** (specified on "Cluster" subtab in "Preferences" section of system-level settings) - see [12.10. Manage system-level settings](12.10._Manage_system-level_settings.md#cluster) for details

After specifying allowed instance types, all GUI forms that allow to select the list of instance types (configurations/launch forms) - will display only valid instance type, according to hierarchy above.  
For price type specifying - if it is set for the user/group/tool - GUI will allow to select only that price type.

In **Cloud Pipeline** platform next hierarchy is set for applying of jobs visibility (sorted by priority):

- **User level** - highest priority (specified for a user) - see [12.4. Edit/delete a user](12.4._Edit_delete_a_user.md#launch-options) for details
- **Group level** (specified for a group/role) - see [above](#launch-options) for details
- _(global)_ **`launch.run.visibility`** (specified as global defaults via system-level settings) - see [12.10. Manage system-level settings](12.10._Manage_system-level_settings.md#launch) for details

### Possibility to revert changes

In certain cases, there could be convenient to undo all changes in a user profile when modifying it - without closing the form.

The admin has such ability:

- open the **User management** tab
- select the desired user to modify, click the **Edit** button to open the popup with the user's settings
- edit some settings
- if needed to revert done changes - click the **REVERT** button at the bottom of the form (**_Note_**: it's possible only before saving!):  
    ![CP_EditDeleteUsers](attachments/EditDeleteUsers_22.png)
- all done unsaved changes are reverted. The **REVERT** button becomes disabled:  
    ![CP_EditDeleteUsers](attachments/EditDeleteUsers_23.png)

**_Note_**: in such way all unsaved changes of user settings could be reverted - _Default data storage_, _Roles & Groups_ list, _Attributes_ and _Launch options_.

## Block/unblock a user

To block user:

1. Open the **Users** subtab in the **User management** section of the system-level settings.
2. Find a user.
3. Click **Edit** button in the row opposite the user name.
4. In the opened pop-up window click the **BLOCK** button in the left bottom corner.  
![CP_EditDeleteUsers](attachments/BlockUnblockUsers_3.png)
5. Confirm the blocking:  
![CP_EditDeleteUsers](attachments/BlockUnblockUsers_1.png)

To unblock user:

1. Open the **Users** subtab in the **User management** section of the system-level settings.
2. Find a user.
3. Click **Edit** button in the row opposite the user name.
4. In the opened pop-up window click the **UNBLOCK** button in the left bottom corner.  
![CP_EditDeleteUsers](attachments/BlockUnblockUsers_4.png)
5. Confirm the unblocking:  
![CP_EditDeleteUsers](attachments/BlockUnblockUsers_2.png)

## GUI Impersonation

**Cloud Pipeline** supports "Impersonation" feature. It allows admins (users with the **_ROLE\_ADMIN_** role) to login as a selected user into the **Cloud Pipeline** GUI and have the same permissions/level of access as the user.

> **_Note_**: while running any job in the "impersonated" mode - the [costs](../Appendix_D/Appendix_D._Costs_management.md#user-report) will go to that user and a linked billing-group.

### Start/Stop impersonation

1. Login to the **Cloud Pipeline** using an administrative account
2. Open the **Users** subtab in the **User management** section of the system-level settings.
3. Find a user.
4. Click the **Edit** button in the row opposite the user name - to load a user's profile:  
    ![CP_EditDeleteUsers](attachments/EditDeleteUsers_25.png)  
    Click the **Impersonate** button in the top-right corner.
5. **Cloud Pipeline** GUI will be reloaded using the selected user:  
    ![CP_EditDeleteUsers](attachments/EditDeleteUsers_26.png)
6. While in the "Impersonation" mode, the following changes happen to the GUI:  
    - Main menu will turn orange, indicating that the impersonation mode is _ON_
    - **Logout** button will be changed to the **Stop impersonation** button:  
    ![CP_EditDeleteUsers](attachments/EditDeleteUsers_27.png)
    - Hovering over the **Stop impersonation** button will bring the ID of the user, whose account is currently active, e.g.:  
    ![CP_EditDeleteUsers](attachments/EditDeleteUsers_28.png)
7. To stop the impersonation and revert back to the own admin account - click the **Stop impersonation** button.

## Delete a user

To delete a user:

2. Open the **Users** subtab in the **User management** section of the system-level settings.
2. Find a user.
3. Click the **Edit** button in the row opposite the user name.
4. In the opened pop-up window click the **Delete** button in the left bottom corner.
5. Confirm the deletion:  
![CP_EditDeleteUsers](attachments/EditDeleteUsers_14.png)