# Check automatically blocking users, based on the AD info

Test verifies that 

**Prerequisites**:
- Admin user
- Non-admin user

**Preparations**:
1. Login as the admin user from the prerequisites
2. Start tool with ldap
3. Add admin and non-admin users from the Prerequisites to the LDAP
4. Block users in LDAP
5. Open the **Settings** page
6. Open the **PREFERENCES** tab
7. Click the **System** tab 
8. Find `system.ldap.user.block.monitor.enable` preference
9. Save the preference value and uncheck *Enabled* checkbox for `system.ldap.user.block.monitor.enable` preference if needed
10. Click **Save** button
11. Click the **LDAP** tab 
12. Save the preferences values, then clear and input the test values for the next preferences: 
    - `ldap.base.path`
    - `ldap.username`
    - `ldap.urls` 
    - `ldap.password`  
13. Click **Save** button 

| Steps | Actions | Expected results |
| :---: | --- | --- |
| 1 | Open the **Settings** page | |
| 2 | Open the **USER MANAGEMENT** page >> **USERS** tab | |
| 3 | Find admin and non-admin users from the Prerequisites | Admin and non-admin users from the Prerequisites aren't blocked |
| 4 | Open the **PREFERENCES** tab | |
| 5 | Click the **System** tab | |
| 6 | Mark *Enabled* checkbox for `system.ldap.user.block.monitor.enable` preference if needed| |
| 7 | Click **Save** button | |
| 8 | Repeat steps 2-3 | <li> Admin user from the Prerequisites isn't blocked <li> Non-admin user from the Prerequisites is blocked |
| 9 | Unblock users in LDAP | |
| 10 | Repeat steps 2-3 | <li> Admin user from the Prerequisites isn't blocked <li> Non-admin user from the Prerequisites is blocked |

**After:**
- Restore preferences values stored at steps 9 and 12 from the Preparations
- Unblock non-admin user from the Prerequisites